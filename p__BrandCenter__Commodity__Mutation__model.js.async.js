(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{chtY:function(e,a,t){"use strict";var r=t("tAuX"),n=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("gWZ8")),u=n(t("p0pE"));t("miYZ");var c=n(t("tsqr")),s=n(t("d6i3")),l=r(t("LvDl")),o=t("7DNP"),d=n(t("xDdU")),p=t("+n12"),f=t("8J3X"),m=t("sImI"),g={namespace:"commodityListMutation",state:{loading:!1,isAdd:!0,goodsId:null,unitList:[{unit:"\u4ef6",value:"0"},{unit:"\u53ea",value:"1"},{unit:"\u53cc",value:"2"},{unit:"\u5957",value:"3"},{unit:"\u6253",value:"4"},{unit:"\u5377",value:"5"},{unit:"\u8f86",value:"6"},{unit:"\u888b",value:"7"},{unit:"\u7bb1",value:"8"},{unit:"\u5305",value:"9"},{unit:"\u5343\u514b",value:"10"},{unit:"\u7c73",value:"11"},{unit:"\u5398\u7c73",value:"12"},{unit:"\u5e73\u65b9\u7c73",value:"13"},{unit:"\u7acb\u65b9\u7c73",value:"14"}],goodsName:"",categoryAId:null,categoryBId:null,goodsBrand:"",currentPrice:"",advisePrice:"",minOrder:null,minOrderUnit:"\u4ef6",stockNum:null,stockUnit:"\u4ef6",freight:null,designerId:null,freightList:[],categoryOne:[],categoryTwo:[],sellingPoints:[{id:(0,d.default)(),sellingPoint:""},{id:(0,d.default)(),sellingPoint:""},{id:(0,d.default)(),sellingPoint:""}],specsList:[],specificationOne:"",specPictuer:!1,specificationParamsOne:[{id:(0,d.default)(),paramValue:"",picture:"",images:[]}],specificationTwo:"",specificationParamsTwo:[{id:(0,d.default)(),paramValue:"",picture:""}],specificationThree:"",specificationParamsThree:[{id:(0,d.default)(),paramValue:"",picture:""}],showList:[{id:(0,d.default)(),paramName:"",paramValue:""}],carouselList:[],detailPicList:[],coverImages:[],coverImage:"",labels:[{name:"\u672c\u5e97\u70ed\u9500",checked:!1,value:"1"},{name:"\u65b0\u54c1\u4e0a\u67b6",checked:!1,value:"2"}],shelfLabel:"",status:null,radioState:m.RadioStates.uniformPrice,uniformDisable:!1,ladderDisable:!0,stepPriceList:[{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null}],detailPicMap:""},effects:{fetch:s.default.mark(function e(a,t){var r,n,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.payload,n=t.put,i=t.all,!r){e.next=5;break}return e.next=5,i([n({type:"updatePageStatus",payload:{id:r}}),n({type:"getGoodsInfo",payload:{id:r}}),n({type:"getBannerList",payload:{goodsId:r}}),n({type:"getPictureDetail",payload:{goodsId:r}}),n({type:"getSpecsDetail",payload:{goodsId:r}})]);case 5:return e.next=7,i([n({type:"getCategoryA"}),n({type:"getFreightList"})]);case 7:case"end":return e.stop()}},e)}),getGoodsInfo:s.default.mark(function e(a,t){var r,n,i,u,l,o,d,p,f,g,P,y,h;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.call,u=t.select,e.next=4,u(function(e){return e.commodityListMutation});case 4:return l=e.sent,o=l.labels,e.next=8,i(m.getGoodsInfo,{id:r.id});case 8:if(d=e.sent,p=d.ok,f=d.data,g=d.msg,p){e.next=15;break}return c.default.error(g),e.abrupt("return");case 15:return e.next=17,n({type:"updateGoodsInfo",payload:{data:f,labels:o}});case 17:return e.next=19,u(function(e){return e.commodityListMutation});case 19:if(P=e.sent,y=P.categoryAId,h=P.isAdd,h){e.next=25;break}return e.next=25,n({type:"getCategoryB",payload:{id:y}});case 25:case"end":return e.stop()}},e)}),getBannerList:s.default.mark(function e(a,t){var r,n,i,u,l,o,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.call,e.next=4,i(m.getBannerList,{goodsId:r.goodsId});case 4:if(u=e.sent,l=u.ok,o=u.data,d=u.msg,l){e.next=11;break}return c.default.error(d),e.abrupt("return");case 11:return e.next=13,n({type:"updateBannerList",payload:{list:o.list}});case 13:case"end":return e.stop()}},e)}),getPictureDetail:s.default.mark(function e(a,t){var r,n,i,u,l,o,d;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.call,e.next=4,i(m.getPictureDetail,{goodsId:r.goodsId});case 4:if(u=e.sent,l=u.ok,o=u.data,d=u.msg,l){e.next=11;break}return c.default.error(d),e.abrupt("return");case 11:return e.next=13,n({type:"updatePictureDetail",payload:{detailPicMap:o.detailPicMap||""}});case 13:case"end":return e.stop()}},e)}),getLabels:s.default.mark(function e(a,t){var r,n,i,u,l,o,d,p,f,g,P;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.call,u=t.select,e.next=4,i(m.getLabels,{goodsId:r.goodsId});case 4:if(l=e.sent,o=l.ok,d=l.data,p=l.msg,o){e.next=11;break}return c.default.error(p),e.abrupt("return");case 11:return e.next=13,u(function(e){return e.commodityListMutation});case 13:return f=e.sent,g=f.labels,e.next=17,i(m.conversionLabels,{labels:g,lablesList:d.lablesList||[]});case 17:return P=e.sent,e.next=20,n({type:"updateLabels",payload:{newLabels:P}});case 20:case"end":return e.stop()}},e)}),getSpecsDetail:s.default.mark(function e(a,t){var r,n,i,u,l,o,d,p,f,g,P,y,h,x;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.call,e.next=4,i(m.getSpecsDetail,{goodsId:r.goodsId});case 4:if(u=e.sent,l=u.ok,o=u.data,d=u.msg,l){e.next=11;break}return c.default.error(d),e.abrupt("return");case 11:return e.next=13,i(m.conversionSpecsList,{data:o});case 13:return p=e.sent,f=p.specificationOne,g=p.specificationParamsOne,P=p.specificationTwo,y=p.specificationParamsTwo,h=p.specificationThree,x=p.specificationParamsThree,e.next=22,n({type:"updateSpecsDetail",payload:{data:o,specificationOne:f,specificationParamsOne:g,specificationTwo:P,specificationParamsTwo:y,specificationThree:h,specificationParamsThree:x}});case 22:case"end":return e.stop()}},e)}),getFreightList:s.default.mark(function e(a,t){var r,n,i,u,l,o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.call,e.next=3,n(m.getFreightList);case 3:if(i=e.sent,u=i.ok,l=i.data,o=i.msg,u){e.next=10;break}return c.default.error(o),e.abrupt("return");case 10:return e.next=12,r({type:"updateFreightTemplateList",payload:{list:l.resultList}});case 12:case"end":return e.stop()}},e)}),getCategoryA:s.default.mark(function e(a,t){var r,n,i,u,l,o;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.call,e.next=3,n(m.getCategoryA);case 3:if(i=e.sent,u=i.ok,l=i.data,o=i.msg,u){e.next=10;break}return c.default.error(o),e.abrupt("return");case 10:return e.next=12,r({type:"updateCategoryA",payload:{list:l.list}});case 12:case"end":return e.stop()}},e)}),changeCategoryA:s.default.mark(function e(a,t){var r,n;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.put,e.next=4,n({type:"changeCategoryAId",payload:{id:r}});case 4:return e.next=6,n({type:"getCategoryB",payload:{id:r}});case 6:case"end":return e.stop()}},e)}),getCategoryB:s.default.mark(function e(a,t){var r,n,i,u,c;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.id,n=t.call,i=t.put,e.next=4,n(m.getCategoryB,{superiorId:r});case 4:return u=e.sent,c=u.data,e.next=8,i({type:"updateCategoryB",payload:{data:c}});case 8:case"end":return e.stop()}},e)}),addParams:s.default.mark(function e(a,t){var r,n,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.select,e.next=3,n(function(e){return e.commodityListMutation.showList});case 3:if(i=e.sent,!(i.length>=5)){e.next=7;break}return c.default.warn("\u5c55\u793a\u53c2\u6570\u6700\u591a\u67095\u4e2a"),e.abrupt("return");case 7:return e.next=9,r({type:"addParamsItem"});case 9:case"end":return e.stop()}},e)}),deleteParams:s.default.mark(function e(a,t){var r,n,i,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.select,e.next=4,i(function(e){return e.commodityListMutation.showList});case 4:if(u=e.sent,1!==u.length){e.next=8;break}return c.default.warn("\u5c55\u793a\u53c2\u6570\u6700\u5c11\u67091\u4e2a"),e.abrupt("return");case 8:return e.next=10,n({type:"deleteParamsItem",payload:{item:r.item}});case 10:case"end":return e.stop()}},e)}),addSpecParamOne:s.default.mark(function e(a,t){var r,n,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.select,e.next=3,n(function(e){return e.commodityListMutation.specificationParamsOne});case 3:if(i=e.sent,!(i.length>=10)){e.next=7;break}return c.default.warn("\u89c4\u683c\u53c2\u6570\u6700\u591a\u670910\u4e2a"),e.abrupt("return");case 7:return e.next=9,r({type:"addSpecificationOneParam"});case 9:case"end":return e.stop()}},e)}),deleteSpecParamOne:s.default.mark(function e(a,t){var r,n,i,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.select,e.next=4,i(function(e){return e.commodityListMutation.specificationParamsOne});case 4:if(u=e.sent,!(u.length<=1)){e.next=8;break}return c.default.warn("\u89c4\u683c\u53c2\u6570\u6700\u5c11\u67091\u4e2a"),e.abrupt("return");case 8:return e.next=10,n({type:"deleteSpecificationOneParam",payload:{item:r.item}});case 10:case"end":return e.stop()}},e)}),addSpecParamTwo:s.default.mark(function e(a,t){var r,n,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.select,e.next=3,n(function(e){return e.commodityListMutation.specificationParamsTwo});case 3:if(i=e.sent,!(i.length>=10)){e.next=7;break}return c.default.warn("\u89c4\u683c\u53c2\u6570\u6700\u591a\u670910\u4e2a"),e.abrupt("return");case 7:return e.next=9,r({type:"addSpecificationTwoParam"});case 9:case"end":return e.stop()}},e)}),deleteSpecParamTwo:s.default.mark(function e(a,t){var r,n,i,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.select,e.next=4,i(function(e){return e.commodityListMutation.specificationParamsTwo});case 4:if(u=e.sent,!(u.length<=1)){e.next=8;break}return c.default.warn("\u89c4\u683c\u53c2\u6570\u6700\u5c11\u67091\u4e2a"),e.abrupt("return");case 8:return e.next=10,n({type:"deleteSpecificationTwoParam",payload:{item:r.item}});case 10:case"end":return e.stop()}},e)}),addSpecParamThree:s.default.mark(function e(a,t){var r,n,i;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.select,e.next=3,n(function(e){return e.commodityListMutation.specificationParamsThree});case 3:if(i=e.sent,!(i.length>=10)){e.next=7;break}return c.default.warn("\u89c4\u683c\u53c2\u6570\u6700\u591a\u670910\u4e2a"),e.abrupt("return");case 7:return e.next=9,r({type:"addSpecificationThreeParam"});case 9:case"end":return e.stop()}},e)}),deleteSpecParamThree:s.default.mark(function e(a,t){var r,n,i,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload,n=t.put,i=t.select,e.next=4,i(function(e){return e.commodityListMutation.specificationParamsThree});case 4:if(u=e.sent,!(u.length<=1)){e.next=8;break}return c.default.warn("\u89c4\u683c\u53c2\u6570\u6700\u5c11\u67091\u4e2a"),e.abrupt("return");case 8:return e.next=10,n({type:"deleteSpecificationThreeParam",payload:{item:r.item}});case 10:case"end":return e.stop()}},e)}),saveGoods:s.default.mark(function e(a,t){var r,n,i,u,o,d,g,P,y,h,x,b,v,w,k,L,A,T,I,S,O,V,N,B,M,C,D,U,G,F,R,Y,q,E,J,j,X,Z,_,W,$,z,H,K,Q,ee,ae,te,re,ne;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.payload.status,n=t.call,i=t.put,u=t.select,e.next=4,u(function(e){return e.commodityListMutation});case 4:if(o=e.sent,d=o.isAdd,g=o.goodsId,P=o.goodsName,y=o.categoryAId,h=o.categoryBId,x=o.sellingPoints,b=o.currentPrice,v=o.advisePrice,w=o.minOrder,k=o.minOrderUnit,L=o.freight,A=o.stockNum,T=o.stockUnit,I=o.showList,S=o.carouselList,O=o.coverImages,V=o.specPictuer,N=o.specificationOne,B=o.specificationParamsOne,M=o.specificationTwo,C=o.specificationParamsTwo,D=o.specificationThree,U=o.specificationParamsThree,G=o.labels,F=o.stepPriceList,R=o.ladderDisable,Y=o.uniformDisable,q=o.detailPicMap,E=o.goodsBrand,!l.some(x,function(e){return""!==e.sellingPoint&&e.sellingPoint.length<4})){e.next=37;break}return c.default.error("\u5356\u70b9\u97004-6\u4e2a\u5b57"),e.abrupt("return");case 37:return e.next=39,n(m.getSellingPoint,{sellingPoints:x});case 39:if(J=e.sent,!(P.length<=0||null===y||null===h||J.length<=0||null===b||null===v||null===w||null===L||null===A)){e.next=43;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u57fa\u672c\u4fe1\u606f\u5fc5\u586b\u53c2\u6570"),e.abrupt("return");case 43:if((0,p.inputSpaceReg)(P)){e.next=46;break}return c.default.error("\u5546\u54c1\u540d\u79f0\u4e0d\u80fd\u8f93\u5165\u7a7a\u683c"),e.abrupt("return");case 46:if(Y||0!==+b){e.next=49;break}return c.default.error("\u7edf\u4e00\u4ef7\u4e0d\u80fd\u4e3a0"),e.abrupt("return");case 49:if(0!==+v){e.next=52;break}return c.default.error("\u5efa\u8bae\u96f6\u552e\u4ef7\u4e0d\u80fd\u4e3a0"),e.abrupt("return");case 52:if(Y||!(+b>=+v)){e.next=55;break}return c.default.error("\u552e\u4ef7\u9700\u5c0f\u4e8e\u5efa\u8bae\u96f6\u552e\u4ef7"),e.abrupt("return");case 55:if(0!==+w&&0!==+A){e.next=58;break}return c.default.error("\u8d77\u8ba2\u91cf\u3001\u5e93\u5b58\u6570\u91cf\u4e0d\u80fd\u4e3a0"),e.abrupt("return");case 58:if(!(+w>+A)){e.next=61;break}return c.default.error("\u5e93\u5b58\u6570\u91cf\u9700\u4e0d\u4f4e\u4e8e\u8d77\u8ba2\u91cf"),e.abrupt("return");case 61:if(k===T){e.next=64;break}return c.default.error("\u8d77\u8ba2\u91cf\u5355\u4f4d\u548c\u603b\u5e93\u5b58\u5355\u4f4d\u9700\u4e00\u81f4"),e.abrupt("return");case 64:if(R){e.next=105;break}if(X=F.map(function(e){return{minArea:+e.minArea,maxArea:+e.maxArea,areaPrice:+e.areaPrice}}),Z=X[0],_=X[1],W=X[2],!(Z.maxArea<=0||Z.areaPrice<=0)){e.next=72;break}return c.default.error("\u8bf7\u8f93\u5165\u9636\u68af\u4ef7\u4e00\u7684\u4fe1\u606f\uff01"),e.abrupt("return");case 72:if(!(W.minArea<=0||W.areaPrice<=0)){e.next=75;break}return c.default.error("\u8bf7\u8f93\u5165\u9636\u68af\u4ef7\u4e09\u7684\u4fe1\u606f\uff01"),e.abrupt("return");case 75:if(!(Z.areaPrice>=v||_.areaPrice>=v||W.areaPrice>=v)){e.next=78;break}return c.default.error("\u9636\u68af\u4ef7\u9700\u5c0f\u4e8e\u5efa\u8bae\u96f6\u552e\u4ef7\uff01"),e.abrupt("return");case 78:if(!(Z.maxArea<=w)){e.next=81;break}return c.default.error("\u9636\u68af\u4ef7\u4e00\u7684\u6700\u5927\u6570\u91cf\u9700\u5927\u4e8e\u8d77\u8ba2\u91cf\uff01"),e.abrupt("return");case 81:if(!(_.minArea>0||_.maxArea>0||_.areaPrice>0)){e.next=96;break}if(!(_.maxArea<=_.minArea)){e.next=85;break}return c.default.error("\u9636\u68af\u4ef7\u4e8c\u7684\u6700\u5927\u6570\u91cf\u9700\u5927\u4e8e\u9636\u68af\u4ef7\u4e8c\u7684\u6700\u5c0f\u6570\u91cf\uff01"),e.abrupt("return");case 85:if(_.minArea===Z.maxArea+1){e.next=88;break}return c.default.error("\u9636\u68af\u4ef7\u4e8c\u7684\u6700\u5c0f\u6570\u91cf\u9700\u4e0e\u9636\u68af\u4ef7\u4e00\u7684\u6700\u5927\u6570\u91cf\u8fde\u7eed\uff01"),e.abrupt("return");case 88:if(W.minArea===_.maxArea+1){e.next=91;break}return c.default.error("\u9636\u68af\u4ef7\u4e09\u7684\u6700\u5c0f\u6570\u91cf\u9700\u4e0e\u9636\u68af\u4ef7\u4e8c\u7684\u6700\u5927\u6570\u91cf\u8fde\u7eed\uff01"),e.abrupt("return");case 91:if(!(Z.areaPrice<=_.areaPrice||_.areaPrice<=W.areaPrice)){e.next=94;break}return c.default.error("\u9636\u68af\u4ef7\u4e09\u7684\u4ef7\u683c\u9700\u5c0f\u4e8e\u9636\u68af\u4ef7\u4e8c\u7684\u4ef7\u683c\uff0c\u9636\u68af\u4ef7\u4e8c\u7684\u4ef7\u683c\u9700\u5c0f\u4e8e\u9636\u68af\u4ef7\u4e00\u7684\u4ef7\u683c\uff01"),e.abrupt("return");case 94:e.next=102;break;case 96:if(W.minArea===Z.maxArea+1){e.next=99;break}return c.default.error("\u9636\u68af\u4ef7\u4e09\u7684\u6700\u5c0f\u6570\u91cf\u9700\u4e0e\u9636\u68af\u4ef7\u4e00\u7684\u6700\u5927\u6570\u91cf\u8fde\u7eed\uff01"),e.abrupt("return");case 99:if(!(Z.areaPrice<=W.areaPrice)){e.next=102;break}return c.default.error("\u9636\u68af\u4ef7\u4e09\u7684\u4ef7\u683c\u9700\u5c0f\u4e8e\u9636\u68af\u4ef7\u4e00\u7684\u4ef7\u683c\uff01"),e.abrupt("return");case 102:return e.next=104,n(m.conversionStepPrice,{stepPriceList:F,minOrder:w});case 104:j=e.sent;case 105:if(N||M||D){e.next=108;break}return c.default.error("\u8bf7\u8f93\u5165\u5546\u54c1\u89c4\u683c\u540d\u79f0"),e.abrupt("return");case 108:if(N||!l.some(B,function(e){return e.paramValue})){e.next=111;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u89c4\u683c\u4e00\u7684\u540d\u79f0"),e.abrupt("return");case 111:if(!N||!l.some(B,function(e){return!e.paramValue})){e.next=114;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u89c4\u683c\u4e00\u7684\u53c2\u6570"),e.abrupt("return");case 114:if(l.uniqBy(B,"paramValue").length===B.length){e.next=117;break}return c.default.error("\u5546\u54c1\u89c4\u683c\u4e00\u7684\u53c2\u6570\u4e0d\u80fd\u91cd\u590d"),e.abrupt("return");case 117:if(!V||!l.some(B,function(e){return e.images.length<=0})){e.next=120;break}return c.default.error("\u8bf7\u4e0a\u4f20\u5546\u54c1\u89c4\u683c\u4e00\u7684\u53c2\u6570\u56fe\u7247"),e.abrupt("return");case 120:if(!V||!l.some(B,function(e){return e.paramValue&&e.images.length<=0})){e.next=123;break}return c.default.error("\u8bf7\u4e0a\u4f20\u5546\u54c1\u89c4\u683c\u4e00\u7684\u53c2\u6570\u56fe\u7247"),e.abrupt("return");case 123:if(M||!l.some(C,function(e){return e.paramValue})){e.next=126;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u89c4\u683c\u4e8c\u7684\u540d\u79f0"),e.abrupt("return");case 126:if(!M||!l.some(C,function(e){return!e.paramValue})){e.next=129;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u89c4\u683c\u4e8c\u7684\u53c2\u6570"),e.abrupt("return");case 129:if(l.uniqBy(C,"paramValue").length===C.length){e.next=132;break}return c.default.error("\u5546\u54c1\u89c4\u683c\u4e8c\u7684\u53c2\u6570\u4e0d\u80fd\u91cd\u590d"),e.abrupt("return");case 132:if(D||!l.some(U,function(e){return e.paramValue})){e.next=135;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u89c4\u683c\u4e09\u7684\u540d\u79f0"),e.abrupt("return");case 135:if(!D||!l.some(U,function(e){return!e.paramValue})){e.next=138;break}return c.default.error("\u8bf7\u586b\u5199\u5546\u54c1\u89c4\u683c\u4e09\u7684\u53c2\u6570"),e.abrupt("return");case 138:if(l.uniqBy(U,"paramValue").length===U.length){e.next=141;break}return c.default.error("\u5546\u54c1\u89c4\u683c\u4e09\u7684\u53c2\u6570\u4e0d\u80fd\u91cd\u590d"),e.abrupt("return");case 141:return e.next=143,n(m.getSpecsList,{specificationOne:N,specificationParamsOne:B,specificationTwo:M,specificationParamsTwo:C,specificationThree:D,specificationParamsThree:U});case 143:if($=e.sent,!l.some($,function(e){return l.some(e.valueList,function(a){return e.paramName===a.paramValue})})){e.next=147;break}return c.default.error("\u5546\u54c1\u89c4\u683c\u7684\u540d\u79f0\u548c\u53c2\u6570\u503c\u4e0d\u80fd\u91cd\u590d"),e.abrupt("return");case 147:if(!l.some(I,function(e){return!e.paramName})){e.next=150;break}return c.default.error("\u8bf7\u586b\u5199\u5c55\u793a\u53c2\u6570\u540d\u79f0"),e.abrupt("return");case 150:if(!l.some(I,function(e){return!e.paramValue})){e.next=153;break}return c.default.error("\u8bf7\u586b\u5199\u5c55\u793a\u53c2\u6570\u503c"),e.abrupt("return");case 153:if(l.uniqBy(I,"paramName").length===I.length){e.next=156;break}return c.default.error("\u5c55\u793a\u53c2\u6570\u540d\u79f0\u4e0d\u80fd\u91cd\u590d"),e.abrupt("return");case 156:if(z=I.map(function(e){return e.id.length>0?{paramName:e.paramName,paramValue:e.paramValue}:e}),!l.some(z,function(e){return e.paramName===e.paramValue})){e.next=160;break}return c.default.error("\u5c55\u793a\u53c2\u6570\u540d\u79f0\u548c\u53c2\u6570\u503c\u4e0d\u80fd\u76f8\u540c"),e.abrupt("return");case 160:if(!(S.length<=0)){e.next=163;break}return c.default.error("\u8bf7\u6dfb\u52a0\u8f6e\u64ad\u56fe"),e.abrupt("return");case 163:if(!l.some(S,function(e){return e.status&&e.status===f.ImageViewStatus.failed})){e.next=166;break}return c.default.error("\u8f6e\u64ad\u56fe\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20"),e.abrupt("return");case 166:if(!l.some(S,function(e){return e.status&&e.status===f.ImageViewStatus.uploading})){e.next=169;break}return c.default.error("\u8f6e\u64ad\u56fe\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7b49\u5f85"),e.abrupt("return");case 169:if(!(q.length<=0)){e.next=172;break}return c.default.error("\u8bf7\u6dfb\u52a0\u8be6\u60c5\u6587\u672c"),e.abrupt("return");case 172:if(!(O.length<=0)){e.next=175;break}return c.default.error("\u8bf7\u6dfb\u52a0\u5c01\u9762\u56fe"),e.abrupt("return");case 175:if(!l.some(O,function(e){return e.status&&e.status===f.ImageViewStatus.failed})){e.next=178;break}return c.default.error("\u5c01\u9762\u56fe\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20"),e.abrupt("return");case 178:if(!l.some(O,function(e){return e.status&&e.status===f.ImageViewStatus.uploading})){e.next=181;break}return c.default.error("\u5c01\u9762\u56fe\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7b49\u5f85"),e.abrupt("return");case 181:return e.next=183,n(m.getCarouselList,{carouselList:S});case 183:return H=e.sent,e.next=186,n(m.getCoverImage,{coverImages:O});case 186:return K=e.sent,Q=l.join(G.map(function(e){return e.checked?e.value:null}),","),ee=/,$/gi,Q=Q.replace(ee,""),e.next=192,n(m.saveGoodsInfo,d,{status:r,id:g||void 0,goodsName:P,categoryAId:y,categoryBId:h,goodsBrand:E,sellingPoint:J,currentPrice:R?(0,p.displayFen)(b):void 0,advisePrice:(0,p.displayFen)(v),minOrder:w,minOrderUnit:k,freight:L,gmsStock:{originalStock:A,unit:T},specsList:$,showList:z,carouselList:H,detailPicMap:q,coverImage:K,ifSettledIn:2,shelfLabel:Q||"",ifStepPrice:R?2:1,stepPriceList:Y?j:void 0});case 192:if(ae=e.sent,te=ae.ok,re=ae.msg,ne=ae.code,te){e.next=204;break}if(c.default.error(re),7012!==ne){e.next=203;break}return e.next=201,i({type:"updateState",payload:{freight:null}});case 201:return e.next=203,i({type:"getFreightList"});case 203:return e.abrupt("return");case 204:return c.default.success("\u4fdd\u5b58\u6210\u529f\uff01"),e.next=207,i({type:"redirect"});case 207:case"end":return e.stop()}},e)}),deleteGoods:s.default.mark(function e(a,t){var r,n,i,u,l,o,d,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,n=t.select,i=t.call,e.next=3,n(function(e){return e.commodityListMutation});case 3:return u=e.sent,l=u.goodsId,e.next=7,i(m.deleteGoods,l);case 7:if(o=e.sent,d=o.ok,p=o.msg,d){e.next=13;break}return c.default.error(p),e.abrupt("return");case 13:return c.default.success("\u5220\u9664\u6210\u529f"),e.next=16,r({type:"redirect"});case 16:case"end":return e.stop()}},e)}),redirect:s.default.mark(function e(a,t){var r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.put,e.next=3,r({type:"brandCenterCommodity/release"});case 3:return e.next=5,r({type:"brandCenterCommodity/fetch"});case 5:return e.next=7,r(o.routerRedux.push("/center/brandcenter/commodity"));case 7:case"end":return e.stop()}},e)})},reducers:{updateState:function(e,a){var t=a.payload;return(0,u.default)({},e,t)},updatePageStatus:function(e,a){var t=a.payload.id;return(0,u.default)({},e,{isAdd:!1,goodsId:t})},updateSpecsDetail:function(e,a){var t=a.payload,r=t.data,n=t.specificationOne,i=t.specificationParamsOne,c=t.specificationTwo,s=t.specificationParamsTwo,o=t.specificationThree,p=t.specificationParamsThree;return(0,u.default)({},e,{specificationOne:n||"",specificationParamsOne:i||[{id:(0,d.default)(),paramValue:"",picture:"",images:[]}],specificationTwo:c||"",specificationParamsTwo:s||[{id:(0,d.default)(),paramValue:"",picture:""}],specificationThree:o||"",specificationParamsThree:p||[{id:(0,d.default)(),paramValue:"",picture:""}],showList:r.showList,specPictuer:!!l.some(i,function(e){return e.picture&&e.picture.length>0})})},updateGoodsInfo:function(e,a){var t=a.payload,r=t.data,n=t.labels,i=r.sellingPoint.split("|"),c=i.map(function(e){return{id:(0,d.default)(),sellingPoint:e.length>0?e:""}});c.length<2&&c.push({id:(0,d.default)(),sellingPoint:""}),c.length<3&&c.push({id:(0,d.default)(),sellingPoint:""});var s=[];1===r.ifStepPrice&&r.stepPriceList&&2===r.stepPriceList.length&&(s=r.stepPriceList.map(function(e){return(0,u.default)({},e,{id:(0,d.default)(),areaPrice:(0,p.displayYuan)(e.areaPrice)})}),s.splice(1,0,{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null})),1===r.ifStepPrice&&r.stepPriceList&&3===r.stepPriceList.length&&(s=r.stepPriceList.map(function(e){return(0,u.default)({},e,{id:(0,d.default)(),areaPrice:(0,p.displayYuan)(e.areaPrice)})})),r.stepPriceList&&2!==r.ifStepPrice&&0!==r.stepPriceList.length||(s=[{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null}]);var l=r.shelfLabel&&r.shelfLabel.split(",");return l&&n.forEach(function(e){l.forEach(function(a){e.value===a&&(e.checked=!0)})}),(0,u.default)({},e,{goodsName:r.goodsName,categoryAId:r.categoryAId,categoryBId:r.categoryBId,sellingPoints:c,currentPrice:(0,p.displayYuan)(r.currentPrice),advisePrice:(0,p.displayYuan)(r.advisePrice),minOrder:r.minOrder,minOrderUnit:r.minOrderUnit,freight:r.freight,stockNum:r.originalStock||r.stockNum,stockUnit:r.gmsStock?r.gmsStock.unit:r.stockUnit,designer:r.designer,coverImages:[{id:(0,d.default)(),server:r.coverImage}],ladderDisable:2===r.ifStepPrice,uniformDisable:1===r.ifStepPrice,stepPriceList:s,radioState:r.ifStepPrice,goodsBrand:r.goodsBrand,labels:n})},updateBannerList:function(e,a){var t=a.payload.list,r=t.map(function(e){return{id:e.id,server:e.picture}});return(0,u.default)({},e,{carouselList:r})},updateDetailPicMap:function(e,a){var t=a.payload;return(0,u.default)({},e,{detailPicMap:t.detailPicMap})},updatePictureDetail:function(e,a){var t=a.payload.detailPicMap;return(0,u.default)({},e,{detailPicMap:t})},updateLabels:function(e,a){var t=a.payload;return(0,u.default)({},e,{labels:t.newLabels})},changeLabelsChecked:function(e,a){var t=a.payload,r=t.name,n=t.checked,i=e.labels.map(function(e){return e.name===r?(0,u.default)({},e,{checked:n}):e});return(0,u.default)({},e,{labels:i})},updateSpecificationOneName:function(e,a){var t=a.payload.specificationOne;return(0,u.default)({},e,{specificationOne:t})},updateSpecPicture:function(e,a){var t,r=a.payload.checked;return t=r?e.specificationParamsOne:e.specificationParamsOne.map(function(e){return e.images&&e.images.length>0?(0,u.default)({},e,{images:[]}):e}),(0,u.default)({},e,{specPictuer:r,specificationParamsOne:t})},updateSpecPictuerValue:function(e,a){var t=a.payload,r=t.images,n=t.item,i=e.specificationParamsOne.map(function(e){return e.id===n.id?(0,u.default)({},e,{images:r}):e});return(0,u.default)({},e,{specificationParamsOne:i})},updateSpecificationOneValue:function(e,a){var t=a.payload,r=t.id,n=t.paramValue,i=e.specificationParamsOne.map(function(e){return e.id===r?(0,u.default)({},e,{paramValue:n}):e});return(0,u.default)({},e,{specificationParamsOne:i})},addSpecificationOneParam:function(e){return(0,u.default)({},e,{specificationParamsOne:[].concat((0,i.default)(e.specificationParamsOne),[{id:(0,d.default)(),paramValue:"",picture:"",images:[]}])})},deleteSpecificationOneParam:function(e,a){var t=a.payload.item,r=(0,i.default)(e.specificationParamsOne),n=l.pull(r,t);return(0,u.default)({},e,{specificationParamsOne:n})},updateSpecificationTwoName:function(e,a){var t=a.payload.specificationTwo;return(0,u.default)({},e,{specificationTwo:t})},updateSpecificationTwoValue:function(e,a){var t=a.payload,r=t.id,n=t.paramValue,i=e.specificationParamsTwo.map(function(e){return e.id===r?(0,u.default)({},e,{paramValue:n}):e});return(0,u.default)({},e,{specificationParamsTwo:i})},addSpecificationTwoParam:function(e,a){var t=a.payload;return(0,u.default)({},e,t,{specificationParamsTwo:[].concat((0,i.default)(e.specificationParamsTwo),[{id:(0,d.default)(),paramValue:""}])})},deleteSpecificationTwoParam:function(e,a){var t=a.payload.item,r=(0,i.default)(e.specificationParamsTwo),n=l.pull(r,t);return(0,u.default)({},e,{specificationParamsTwo:n})},updateSpecificationThreeName:function(e,a){var t=a.payload.specificationThree;return(0,u.default)({},e,{specificationThree:t})},updateSpecificationThreeValue:function(e,a){var t=a.payload,r=t.id,n=t.paramValue,i=e.specificationParamsThree.map(function(e){return e.id===r?(0,u.default)({},e,{paramValue:n}):e});return(0,u.default)({},e,{specificationParamsThree:i})},addSpecificationThreeParam:function(e,a){var t=a.payload;return(0,u.default)({},e,t,{specificationParamsThree:[].concat((0,i.default)(e.specificationParamsThree),[{id:(0,d.default)(),paramValue:""}])})},deleteSpecificationThreeParam:function(e,a){var t=a.payload.item,r=(0,i.default)(e.specificationParamsThree),n=l.pull(r,t);return(0,u.default)({},e,{specificationParamsThree:n})},updateParamsName:function(e,a){var t=a.payload,r=t.id,n=t.paramName,i=e.showList.map(function(e){return e.id===r?(0,u.default)({},e,{paramName:n}):e});return(0,u.default)({},e,{showList:i})},updateParamsValue:function(e,a){var t=a.payload,r=t.id,n=t.paramValue,i=e.showList.map(function(e){return e.id===r?(0,u.default)({},e,{paramValue:n}):e});return(0,u.default)({},e,{showList:i})},addParamsItem:function(e,a){var t=a.payload;return(0,u.default)({},e,t,{showList:[].concat((0,i.default)(e.showList),[{id:(0,d.default)(),paramName:"",paramValue:""}])})},deleteParamsItem:function(e,a){var t=a.payload.item,r=(0,i.default)(e.showList),n=l.pull(r,t);return(0,u.default)({},e,{showList:n})},updateCarouselList:function(e,a){var t=a.payload.carouselList;return(0,u.default)({},e,{carouselList:t})},updateDetailPicList:function(e,a){var t=a.payload.detailPicList;return(0,u.default)({},e,{detailPicList:t})},updateCoverImages:function(e,a){var t=a.payload.coverImages;return(0,u.default)({},e,{coverImages:t})},radioChange:function(e,a){var t=a.payload;return(0,u.default)({},e,{radioState:t,uniformDisable:t===m.RadioStates.ladderPrice,ladderDisable:t===m.RadioStates.uniformPrice,stepPriceList:[{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null}],currentPrice:""})},changeMinArea:function(e,a){var t=a.payload,r=t.minArea,n=t.item,i=e.stepPriceList.map(function(e){return e.id===n.id?(0,u.default)({},e,{minArea:r}):e});return(0,u.default)({},e,{stepPriceList:i})},changeMaxArea:function(e,a){var t=a.payload,r=t.maxArea,n=t.item,i=e.stepPriceList.map(function(e){return e.id===n.id?(0,u.default)({},e,{maxArea:r}):e});return(0,u.default)({},e,{stepPriceList:i})},changeAreaPrice:function(e,a){var t=a.payload,r=t.areaPrice,n=t.item,i=e.stepPriceList.map(function(e){return e.id===n.id?(0,u.default)({},e,{areaPrice:r}):e});return(0,u.default)({},e,{stepPriceList:i})},updateCategoryA:function(e,a){var t=a.payload;return(0,u.default)({},e,{categoryOne:t.list})},updateCategoryB:function(e,a){var t=a.payload.data;return(0,u.default)({},e,{categoryTwo:t.list||[]})},changeCategoryAId:function(e,a){var t=a.payload.id;return(0,u.default)({},e,{categoryAId:t,categoryBId:null})},changeCategoryBId:function(e,a){var t=a.payload.id;return(0,u.default)({},e,{categoryBId:t})},updateFreightTemplateList:function(e,a){var t=a.payload.list;return(0,u.default)({},e,{freightList:t||[]})},changeFreightId:function(e,a){var t=a.payload.id;return(0,u.default)({},e,{freight:t})},updateGoodsName:function(e,a){var t=a.payload.goodsName;return(0,u.default)({},e,{goodsName:t})},updateSellingPoint:function(e,a){var t=a.payload,r=t.index,n=t.sellingPoint,i=e.sellingPoints.map(function(e,a){return r===a?(0,u.default)({},e,{sellingPoint:n}):e});return(0,u.default)({},e,{sellingPoints:i})},updatePrice:function(e,a){var t=a.payload.currentPrice;return(0,u.default)({},e,{currentPrice:t})},updateAdvisePrice:function(e,a){var t=a.payload.advisePrice;return(0,u.default)({},e,{advisePrice:t})},updateMinOrder:function(e,a){var t=a.payload.minOrder;return(0,u.default)({},e,{minOrder:t})},updateMinOrderUnit:function(e,a){var t=a.payload.minOrderUnit;return(0,u.default)({},e,{minOrderUnit:t})},updateStockNum:function(e,a){var t=a.payload.stockNum;return(0,u.default)({},e,{stockNum:t})},updateStockUnit:function(e,a){var t=a.payload.stockUnit;return(0,u.default)({},e,{stockUnit:t})},release:function(e,a){var t=a.payload;return(0,u.default)({},e,t,{isAdd:!0,goodsId:null,goodsName:"",categoryAId:null,categoryBId:null,goodsBrand:"",currentPrice:"",advisePrice:"",minOrder:null,minOrderUnit:"\u4ef6",stockNum:null,stockUnit:"\u4ef6",freight:null,designerId:null,freightList:[],categoryOne:[],categoryTwo:[],sellingPoints:[{id:(0,d.default)(),sellingPoint:""},{id:(0,d.default)(),sellingPoint:""},{id:(0,d.default)(),sellingPoint:""}],specsList:[],specificationOne:"",specPictuer:!1,specificationParamsOne:[{id:(0,d.default)(),paramValue:"",picture:"",images:[]}],specificationTwo:"",specificationParamsTwo:[{id:(0,d.default)(),paramValue:"",picture:""}],specificationThree:"",specificationParamsThree:[{id:(0,d.default)(),paramValue:"",picture:""}],showList:[{id:(0,d.default)(),paramName:"",paramValue:""}],carouselList:[],detailPicList:[],coverImages:[],coverImage:"",labels:[{name:"\u672c\u5e97\u70ed\u9500",checked:!1,value:"1"},{name:"\u65b0\u54c1\u4e0a\u67b6",checked:!1,value:"2"}],status:null,radioState:m.RadioStates.uniformPrice,uniformDisable:!1,ladderDisable:!0,stepPriceList:[{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null},{id:(0,d.default)(),minArea:null,maxArea:null,areaPrice:null}],detailPicMap:""})}}};a.default=g}}]);