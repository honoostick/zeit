(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"3wKY":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("gWZ8")),u=r(a("d6i3"));a("miYZ");var s=r(a("tsqr")),c=r(a("p0pE")),o=a("7DNP"),d=r(a("xDdU")),i=a("RMMp"),l={namespace:"brandCenterRegisterMaterial",state:{secondStatus:i.SecondType.First,provinces:[],cities:[],list:[],data:{},logoImages:[],images:[],frontImages:[],backImages:[],showoccupation:!1},effects:{getCheckCode:u.default.mark(function e(t,a){var r,n,o,d,l,p;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,o=(0,c.default)({},r,{smsType:2}),e.next=5,n(i.getCheckCode,(0,c.default)({},o));case 5:if(d=e.sent,l=d.ok,p=d.msg,l){e.next=11;break}return s.default.error(p),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e)}),getOcc:u.default.mark(function e(t,a){var r,c,o,d,l,p,f,y;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,c=a.put,o={dataType:7},e.next=4,r(i.getDic,o);case 4:if(d=e.sent,l=d.ok,p=d.msg,f=d.data,y=(0,n.default)(f),l){e.next=12;break}return s.default.error(p),e.abrupt("return");case 12:return e.next=14,c({type:"save",payload:{list:y}});case 14:case"end":return e.stop()}},e)}),getOcc1:u.default.mark(function e(t,a){var r,c,o,d,l,p,f,y;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,c=a.put,o={dataType:8},e.next=4,r(i.getDic,o);case 4:if(d=e.sent,l=d.ok,p=d.msg,f=d.data,y=(0,n.default)(f),l){e.next=12;break}return s.default.error(p),e.abrupt("return");case 12:return e.next=14,c({type:"save",payload:{list:y}});case 14:case"end":return e.stop()}},e)}),getProvince:u.default.mark(function e(t,a){var r,n,c,o,d,l,p;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,c={dataType:1},e.next=4,r(i.getDic,c);case 4:if(o=e.sent,d=o.ok,l=o.msg,p=o.data,d){e.next=11;break}return s.default.error(l),e.abrupt("return");case 11:return e.next=13,n({type:"saveProvince",payload:{provinces:p}});case 13:case"end":return e.stop()}},e)}),getCity:u.default.mark(function e(t,a){var r,n,c,o,d,l,p,f;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,c=a.put,o={dataType:2,superDataId:r},e.next=5,n(i.getDic,o);case 5:if(d=e.sent,l=d.ok,p=d.msg,f=d.data,l){e.next=12;break}return s.default.error(p),e.abrupt("return");case 12:return e.next=14,c({type:"saveCity",payload:{cities:f}});case 14:case"end":return e.stop()}},e)}),completeUser:u.default.mark(function e(t,a){var r,n,d,l,p,f,y;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,d=a.put,l=(0,c.default)({},r,{headImage:r.headImage[0].server,birthday:r.birthday.format("YYYY-MM-DD HH:mm:ss")}),e.next=5,n(i.completeUser,(0,c.default)({},l));case 5:if(p=e.sent,f=p.ok,y=p.msg,f){e.next=11;break}return s.default.error(y),e.abrupt("return");case 11:return s.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=14,d(o.routerRedux.push("/register/success"));case 14:case"end":return e.stop()}},e)}),getAuthen:u.default.mark(function e(t,a){var r,n,c,o,l,p;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,e.next=3,r(i.getAuthen);case 3:if(c=e.sent,o=c.ok,l=c.msg,p=c.data,o){e.next=10;break}return s.default.error(l),e.abrupt("return");case 10:if(!p){e.next=30;break}return e.next=13,n({type:"getCity",payload:p.provinceId});case 13:return e.next=15,n({type:"save",payload:{data:p}});case 15:if(220011!==p.industryId){e.next=20;break}return e.next=18,n({type:"save",payload:{showoccupation:!0}});case 18:e.next=22;break;case 20:return e.next=22,n({type:"save",payload:{showoccupation:!1}});case 22:return e.next=24,n({type:"updateImages",payload:{logoImages:[{server:p&&p.companyLogo,id:(0,d.default)()}]}});case 24:return e.next=26,n({type:"updateImages",payload:{images:[{server:p.licensePicture,id:(0,d.default)()}]}});case 26:return e.next=28,n({type:"updateImages",payload:{frontImages:[{server:p.idFrontPhoto,id:(0,d.default)()}]}});case 28:return e.next=30,n({type:"updateImages",payload:{backImages:[{server:p.idBackPhoto,id:(0,d.default)()}]}});case 30:case"end":return e.stop()}},e)}),completeFactory:u.default.mark(function e(t,a){var r,n,o,d,l,p,f,y,m,v;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.put,o=a.call,d=a.select,e.next=4,d(function(e){return e.brandCenterRegisterMaterial});case 4:if(l=e.sent,p=l.data,3!==p.approvalStatus){e.next=9;break}return s.default.error("\u60a8\u7684\u8d26\u53f7\u6b63\u5728\u5ba1\u6838\u4e2d\uff0c\u8bf7\u5728\u4e09\u4e2a\u5de5\u4f5c\u65e5\u5185\u67e5\u770b"),e.abrupt("return");case 9:return f={enterpriseName:r.enterpriseName,shopName:r.shopName,industryId:r.industryId,province:r.province,industryName:r.industryName,city:r.city,licenseNumber:r.licenseNumber,companyProfile:r.companyProfile,companyLogo:r.companyLogo[0].server,licensePicture:r.licensePicture[0].server},e.next=12,o(i.completeFactoryFirst,(0,c.default)({},f));case 12:if(y=e.sent,m=y.ok,v=y.msg,!m){e.next=21;break}return s.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=19,n({type:"getAuthen"});case 19:e.next=22;break;case 21:s.default.error(v);case 22:case"end":return e.stop()}},e)}),completeFactoryFirst:u.default.mark(function e(t,a){var r,n,o,d,l,p,f;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,o=a.put,d={enterpriseName:r.enterpriseName,shopName:r.shopName,industryId:r.industryId,province:r.province,industryName:r.industryName,city:r.city,licenseNumber:r.licenseNumber,companyProfile:r.companyProfile,companyLogo:r.companyLogo[0].server,licensePicture:r.licensePicture[0].server},e.next=5,n(i.completeFactoryFirst,(0,c.default)({},d));case 5:if(l=e.sent,p=l.ok,f=l.msg,p){e.next=11;break}return s.default.error(f),e.abrupt("return");case 11:return s.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=14,o({type:"getAuthen"});case 14:case"end":return e.stop()}},e)}),completeFactorySecond:u.default.mark(function e(t,a){var r,n,o,d,l,p,f;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,o=a.put,d={legalName:r.legalName,legalIdentityCard:r.legalIdentityCard,legalPhone:r.legalPhone,code:r.code,contactName:r.contactName,contactDuties:r.contactDuties,contactPhone:r.contactPhone,idFrontPhoto:r.idFrontPhoto[0].server,idBackPhoto:r.idBackPhoto[0].server},e.next=5,n(i.completeFactorySecond,(0,c.default)({},d));case 5:if(l=e.sent,p=l.ok,f=l.msg,p){e.next=11;break}return s.default.error(f),e.abrupt("return");case 11:return s.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=14,o({type:"getAuthen"});case 14:case"end":return e.stop()}},e)})},reducers:{save:function(e,t){var a=t.payload;return(0,c.default)({},e,a)},saveProvince:function(e,t){var a=t.payload;return(0,c.default)({},e,a)},saveCity:function(e,t){var a=t.payload;return(0,c.default)({},e,a)},updateStep:function(e,t){var a=t.payload;return(0,c.default)({},e,{secondStatus:a})},updateImages:function(e,t){var a=t.payload;return(0,c.default)({},e,a)}}};t.default=l}}]);