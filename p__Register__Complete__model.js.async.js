(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{"eg+g":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("p0pE")),s=r(a("d6i3"));a("miYZ");var u=r(a("tsqr")),c=a("7DNP"),o=r(a("xDdU")),d=a("ehXv"),p={namespace:"registerComplete",state:{secondStatus:d.SecondType.First,showoccupation:!1,showoccupation1:!1,provinces:[],cities:[],list:[],data:{},logoImages:[],images:[],frontImages:[],backImages:[]},effects:{getOcc:s.default.mark(function e(t,a){var r,n,c,o,p,i,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,c={dataType:6},e.next=4,r(d.getDic,c);case 4:if(o=e.sent,p=o.ok,i=o.msg,l=o.data,p){e.next=11;break}return u.default.error(i),e.abrupt("return");case 11:return e.next=13,n({type:"save",payload:{list:l}});case 13:case"end":return e.stop()}},e)}),getOcc1:s.default.mark(function e(t,a){var r,n,c,o,p,i,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,c={dataType:8},e.next=4,r(d.getDic,c);case 4:if(o=e.sent,p=o.ok,i=o.msg,l=o.data,p){e.next=11;break}return u.default.error(i),e.abrupt("return");case 11:return e.next=13,n({type:"save",payload:{list:l}});case 13:case"end":return e.stop()}},e)}),getProvince:s.default.mark(function e(t,a){var r,n,c,o,p,i,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,c={dataType:1},e.next=4,r(d.getDic,c);case 4:if(o=e.sent,p=o.ok,i=o.msg,l=o.data,p){e.next=11;break}return u.default.error(i),e.abrupt("return");case 11:return e.next=13,n({type:"saveProvince",payload:{provinces:l}});case 13:case"end":return e.stop()}},e)}),getCity:s.default.mark(function e(t,a){var r,n,c,o,p,i,l,f;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,c=a.put,o={dataType:2,superDataId:r},e.next=5,n(d.getDic,o);case 5:if(p=e.sent,i=p.ok,l=p.msg,f=p.data,i){e.next=12;break}return u.default.error(l),e.abrupt("return");case 12:return e.next=14,c({type:"saveCity",payload:{cities:f}});case 14:case"end":return e.stop()}},e)}),completeUser:s.default.mark(function e(t,a){var r,o,p,i,l,f,y;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,p=a.put,i=(0,n.default)({},r,{headImage:r.headImage&&r.headImage[0]&&r.headImage[0].server,birthday:r.birthday.format("YYYY-MM-DD HH:mm:ss")}),e.next=5,o(d.completeUser,(0,n.default)({},i));case 5:if(l=e.sent,f=l.ok,y=l.msg,f){e.next=11;break}return u.default.error(y),e.abrupt("return");case 11:return u.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=14,p({type:"user/saveUser",payload:{headImage:r.headImage&&r.headImage[0]&&r.headImage[0].server,name:r.nickName,userType:6}});case 14:return e.next=16,p(c.routerRedux.push("/register/success"));case 16:case"end":return e.stop()}},e)}),completeFactoryFirst:s.default.mark(function e(t,a){var r,o,p,i,l,f,y;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,p=a.put,i=(0,n.default)({},r,{companyLogo:r.companyLogo[0].server,licensePicture:r.licensePicture[0].server}),e.next=5,o(d.completeFactoryFirst,i);case 5:if(l=e.sent,f=l.ok,y=l.msg,f){e.next=11;break}return u.default.error(y),e.abrupt("return");case 11:return u.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=14,p({type:"user/saveUser",payload:{headImage:r.companyLogo[0].server,name:r.enterpriseName,userType:8}});case 14:return e.next=16,p(c.routerRedux.push("/register/success"));case 16:return e.next=18,p({type:"release"});case 18:return e.next=20,p({type:"updateStep",payload:d.SecondType.First});case 20:window.location.reload();case 21:case"end":return e.stop()}},e)}),completeFactorySecond:s.default.mark(function e(t,a){var r,o,p,i,l,f,y;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,o=a.call,p=a.put,i=(0,n.default)({},r,{idFrontPhoto:r.idFrontPhoto[0].server,idBackPhoto:r.idBackPhoto[0].server}),e.next=5,o(d.completeFactorySecond,(0,n.default)({},i));case 5:if(l=e.sent,f=l.ok,y=l.msg,f){e.next=11;break}return u.default.error(y),e.abrupt("return");case 11:return u.default.success("\u7f16\u8f91\u6210\u529f\uff01"),e.next=14,p(c.routerRedux.push("/register/success"));case 14:return e.next=16,p({type:"release"});case 16:return e.next=18,p({type:"updateStep",payload:d.SecondType.First});case 18:case"end":return e.stop()}},e)}),getAuthen:s.default.mark(function e(t,a){var r,n,c,p,i,l;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,e.next=3,r(d.getAuthen);case 3:if(c=e.sent,p=c.ok,i=c.msg,l=c.data,p){e.next=10;break}return u.default.error(i),e.abrupt("return");case 10:if(!l){e.next=27;break}return e.next=13,n({type:"getCity",payload:l.provinceId});case 13:return e.next=15,n({type:"save",payload:{data:l}});case 15:return e.next=17,n({type:"updateImages",payload:{logoImages:[{server:l&&l.companyLogo,id:(0,o.default)()}]}});case 17:return e.next=19,n({type:"updateImages",payload:{images:[{server:l&&l.licensePicture,id:(0,o.default)()}]}});case 19:return e.next=21,n({type:"updateImages",payload:{frontImages:[{server:l&&l.idFrontPhoto,id:(0,o.default)()}]}});case 21:return e.next=23,n({type:"updateImages",payload:{backImages:[{server:l&&l.idBackPhoto,id:(0,o.default)()}]}});case 23:return e.next=25,n({type:"save",payload:{showoccupation:!!l.industryName}});case 25:return e.next=27,n({type:"save",payload:{showoccupation1:!!l.industryName}});case 27:case"end":return e.stop()}},e)})},reducers:{save:function(e,t){var a=t.payload;return(0,n.default)({},e,a)},saveProvince:function(e,t){var a=t.payload;return(0,n.default)({},e,a)},saveCity:function(e,t){var a=t.payload;return(0,n.default)({},e,a)},updateStep:function(e,t){var a=t.payload;return(0,n.default)({},e,{secondStatus:a})},updateImages:function(e,t){var a=t.payload;return(0,n.default)({},e,a)},release:function(e,t){var a=t.payload;return(0,n.default)({},e,a,{secondStatus:d.SecondType.First,showoccupation:!1,showoccupation1:!1,provinces:[],cities:[],list:[],data:{},logoImages:[],images:[],frontImages:[],backImages:[]})}}};t.default=p}}]);