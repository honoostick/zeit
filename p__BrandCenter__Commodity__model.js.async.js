(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"R/NY":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("p0pE")),s=n(a("d6i3"));a("miYZ");var o=n(a("tsqr")),u=a("w3T2"),d={namespace:"brandCenterCommodity",state:{commodityList:[],pagination:{total:0,current:1,pageSize:10},sort:u.SortType.time,visible:!1,reasonVisible:!1,modalTitle:"",reason:""},effects:{fetch:s.default.mark(function e(t,a){var n,r,d,i,l,c,p,f,g,v,x,y,m;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,r=a.call,d=a.put,i=a.select,!n){e.next=5;break}return e.next=5,d({type:"setPagination",payload:{pageIndex:n.pageIndex,pageSize:n.pageSize}});case 5:return e.next=7,i(function(e){return e.user});case 7:return l=e.sent,c=l.currentUser,e.next=11,i(function(e){return e.brandCenterCommodity});case 11:return p=e.sent,f=p.pagination,g=p.sort,e.next=16,r(u.getData,{pageIndex:f.current,pageSize:f.pageSize,sort:g,enterpriseId:c.userId,ifFreezed:1});case 16:if(v=e.sent,x=v.data,y=v.ok,m=v.msg,y){e.next=23;break}return o.default.error(m),e.abrupt("return");case 23:return e.next=25,d({type:"save",payload:{data:x}});case 25:case"end":return e.stop()}},e)}),saveShelf:s.default.mark(function e(t,a){var n,r,d,i,l,c,p,f;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,r=n.id,d=n.status,i=a.call,l=a.put,e.next=4,l({type:"closeModal"});case 4:return e.next=6,i(u.saveShelf,{id:r,status:d});case 6:if(c=e.sent,p=c.ok,f=c.msg,!p){e.next=15;break}return 2===d?o.default.success("\u4e0b\u67b6\u6210\u529f"):o.default.success("\u4e0a\u67b6\u6210\u529f\uff0c\u5f85\u5ba1\u6838"),e.next=13,l({type:"fetch"});case 13:e.next=16;break;case 15:o.default.error(f);case 16:case"end":return e.stop()}},e)}),setTop:s.default.mark(function e(t,a){var n,r,d,i,l,c;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload.goodsId,r=a.call,d=a.put,e.next=4,r(u.setTop,{goodsId:n});case 4:if(i=e.sent,l=i.ok,c=i.msg,!l){e.next=13;break}return o.default.success("\u7f6e\u9876\u6210\u529f"),e.next=11,d({type:"fetch"});case 11:e.next=14;break;case 13:o.default.error(c);case 14:case"end":return e.stop()}},e)}),getReason:s.default.mark(function e(t,a){var n,r,d,i,l,c,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload.goodsId,r=a.call,d=a.put,e.next=4,r(u.getReason,{goodsId:n});case 4:return i=e.sent,l=i.ok,c=i.msg,p=i.data,l||o.default.error(c),e.next=11,d({type:"updateState",payload:{reason:p}});case 11:return e.next=13,d({type:"openRejectModal"});case 13:case"end":return e.stop()}},e)})},reducers:{updateState:function(e,t){var a=t.payload;return(0,r.default)({},e,a)},save:function(e,t){var a=t.payload.data;return(0,r.default)({},e,{commodityList:a.list,pagination:(0,r.default)({},e.pagination,{total:+a.resultCount})})},setPagination:function(e,t){var a=t.payload;return(0,r.default)({},e,{pagination:(0,r.default)({},e.pagination,{current:a.pageIndex,pageSize:a.pageSize})})},openModal:function(e,t){var a=t.payload,n=a.id,s=a.modalTitle;return(0,r.default)({},e,{goodsId:n,visible:!0,modalTitle:s})},openRejectModal:function(e,t){var a=t.payload;return(0,r.default)({},e,a,{reasonVisible:!0})},closeModal:function(e,t){var a=t.payload;return(0,r.default)({},e,a,{visible:!1,reasonVisible:!1,reason:""})},release:function(e,t){var a=t.payload;return(0,r.default)({},e,a,{pagination:{total:0,current:1,pageSize:10}})}}};t.default=d}}]);